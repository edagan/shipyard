go_import_path: github.com/shipyard/shipyard
language: go
sudo: required
go:
  - 1.5
services:
  - docker
before_install:
  - sudo bash < <(curl -s -S -L https://deb.nodesource.com/setup_5.x)
  - sudo apt-get -qq update
  - sudo apt-get install -y bash bison curl nodejs
  - sudo npm install bower -g
  - docker pull rethinkdb
  - docker run -d -p 29015:29015 -p 28015:28015 -p 8087:8080 --name=rethinkdb --hostname=rethinkdb  -e no_proxy="localhost,127.0.0.1,proxy,swarm,media,rethinkdb" rethinkdb
install:
  - go get github.com/tools/godep
script:
  - if [[ $(go version |grep 1.5) ]]; then export GO15VENDOREXPERIMENT=1 ; fi
  - make all
  - make test
